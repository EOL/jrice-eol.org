#!/bin/bash

freemem=$(free | grep Mem | awk '{print $4;}')
timestamp=$(date +"%Y-%m-%d %T")
if ((freemem <= 10000000))
then
  echo "$timestamp Insufficient memory remaining, forking..."
  /app/bin/unicorn_restart
else
  echo "Memory looks acceptable, aborting."
fi